<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>

import Code from 'mdx-code';
import Layout from './layout';
import { Box } from 'theme-ui'
import { themes } from 'mdx-deck'
import { hack } from '@mdx-deck/themes'
export const theme = themes.hack

import ImgPath from "./assets/quote-one-of-my-most-productive-days-was-throwing-away-1-000-lines-of-code-ken-thompson-29-37-61.jpg"
import DijkstraProof from "./assets/dijkstra_proof_tests_error.jpg"
import Glenford from "./assets/glenford_myers.jpg"
import Cycle from "./assets/cycle-global-tdd.png"

# <Box color="tomato">TDD</Box>

### <Box color="red">1. QA</Box>
### <Box color="red">2. Les Tests</Box>
### <Box color="red">3. TDD vs Approche traditionnelle</Box>
### <Box color="red">4. Utilité des tests ?</Box>
### <Box color="red">5. Pour aller plus loin</Box>

---

# 1. QA

<Steps>

### Programmer, c'est compliqué

</Steps>

<Image src={ImgPath} style={{width: "85%", height: "50%"}} />


---

# 1. QA

<Steps>

<pre>« There are only 2 ways to write error-free programs;{"\n"}
    only the third one works »</pre>


<Box>
<pre>« It's hard enough to find an error in your code when you're looking for it;{"\n"}
    it's even harder when you've assumed your code is error-free. »</pre>

― Steve McConnell
</Box>

<Box>
« Without requirements and design, programming is the art of adding bugs to an empty text file. »

― Louis Srygley 
</Box>

<Box>
« If debugging is the process of removing software bugs, then programming must be the process of putting them. »

– Edsger Dijkstra
</Box>

<span style={{postion: "relative", textAlign: "center"}}>
        <span style={{position: "absolute", textAlign: "center"}}>1</span>
        <span style={{position: "absolute", marginTop: "0.3em", marginLeft: "-1.6em"}}>_________</span>
        <span style={{position: "absolute", marginTop: "1.5em", marginLeft: "-1.3em"}}>1 + e<sup>-(loc)</sup></span>
        <span style={{position: "absolute", marginTop: "0.7em", marginLeft: "-7em"}}>P(error)</span>
        <span style={{position: "absolute", marginTop: "0.7em", marginLeft: "-3em"}}>=</span>
</span>

</Steps>

---

# <Box color="tomato">TDD</Box>

### <Box color="green">1. QA</Box>
### <Box color="red">2. Les Tests</Box>
### <Box color="red">3. TDD vs Approche traditionnelle</Box>
### <Box color="red">4. Utilité des tests ?</Box>
### <Box color="red">5. Pour aller plus loin</Box>

---

# 2. Les Tests

L'un des moyen les plus efficace de mitigation d'erreur consiste à faire des tests.

<Steps>

## 4 "niveaux" de tests

### Tests unitaires
### Tests d'intégration
### Tests de validation 
### Tests d'acceptation

</Steps>

---

## Tests unitaires

<Steps>

- Un test est un ensemble de cas à tester.

- Une testsuite contient plusieurs tests.

- Chaque test devrait tester plusieurs cas (testcase)

</Steps>

---

<Code>

```js Exemple tests unitaires assert - Test
const assert = require('assert').strict;
const { xor } = require("./xor")

assert(xor(false, false) === false)
assert(xor(true, false) === true)
assert(xor(false, true) === true)
assert(xor(true, true) === false)
```

</Code>

<Code>

```js Exemple tests unitaires assert - Fonction
const xor = (a, b) => {
    return (a || b) && !(a && b)
}

exports.xor = xor
```

</Code>

---

<Box>
<button style={{marginRight: "2em"}}><a href="https://asciinema.org/a/Sem52QDXSV20DHXmwOTsdCMX7" style={{color: "black"}}>Asciinema</a></button><button><a href="https://exercism.io/my/tracks/javascript" style={{color: "black"}}>Exercism</a></button>
</Box>

<Code>

```js Exemple tests unitaires Jest - Test
const sum = require('./sum');

test('adds 1 + 2 to equal 3', () => {
    expect(sum(1, 2)).toBe(3);
});
```

</Code>

<Code>

```js Exemple tests unitaires Jest - Fonction
const sum = (a, b) => {
    return a + b;
}
module.exports = sum;
```

</Code>

---

<Box>
<button style={{marginRight: "2em"}}><a href="https://asciinema.org/a/1sN4tQqGGselZutygxAuHFbTJ" style={{color: "black"}}>Asciinema</a></button><button><a href="https://mochajs.org/#reporting" style={{color: "black"}}>Reporting</a></button>
</Box>

<Code>

```js Exemple tests unitaires Mocha - Test
const { add } = require('./add');
const assert = require('assert');

it('should add to numbers from an es module', () => {
    assert.equal(add(3, 5), 8);
});
```

</Code>

<Code>

```js Exemple tests unitaires Mocha - Fonction
const add = (a, b) => {
    return a + b;
}
exports.add = add;
```

</Code>

<Code>

```js Exemple tests unitaires Mocha - Test
var assert = require('assert');

describe('Array', function () {
    describe('#indexOf()', function () {
        it('should return -1 when the value is not present', function () {
            assert.equal([1, 2, 3].indexOf(4), -1);
        });
    });
});
```

</Code>

---

<Image src={Glenford} style={{width: "85%", height: "50%"}} />

---

# <Box color="tomato">TDD</Box>

### <Box color="green">1. QA</Box>
### <Box color="green">2. Les Tests</Box>
### <Box color="red">3. TDD vs Approche traditionnelle</Box>
### <Box color="red">4. Utilité des tests ?</Box>
### <Box color="red">5. Pour aller plus loin</Box>

---

# 3. TDD vs Approche traditionnelle

---

## Approche traditionnelle (Cycle en V)

<Steps>

### Besoin du client
### Cahier des charges
### Spécification
### Développement
### Tests (unitaires => intégration => validation => acceptation)

</Steps>

---

## Test-driven Development

Avec le Test-driven development, on écrit les tests <strong>avant</strong> d'écrire le code du projet. (Test First Design)

C'est une méthode de développement itérative et incrémentale.

Le TDD se prête très bien au pair programming.

KISS / YAGNI friendly

---

### Les 3 lois de TDD

<Steps>

<Box>1. Vous devez écrire un test qui échoue avant de pouvoir écrire le code de production correspondant.</Box>
<Box>2. Vous devez écrire une seule assertion à la fois, qui fait échouer le test ou qui échoue à la compilation.</Box>
<Box>3. Vous devez écrire le minimum de code de production pour que l'assertion du test actuellement en échec soit satisfaite.</Box>

</Steps>

---

<Image src={Cycle} style={{width: "85%", height: "85%"}} />

---

<Box style={{marginBottom: "3em"}}>

« Good design adds value faster than it adds cost. »

– Joel Spolsky

</Box>

<Steps>

<Box style={{marginTop: "3em"}}>


    « First, solve the problem.
      Then, write the code. »

– John Johnson
</Box>

</Steps>

---

# <Box color="tomato">TDD</Box>

### <Box color="green">1. QA</Box>
### <Box color="green">2. Les Tests</Box>
### <Box color="green">3. TDD vs Approche traditionnelle</Box>
### <Box color="red">4. Utilité des tests ?</Box>
### <Box color="red">5. Pour aller plus loin</Box>

---

# 4. Utilité des tests ?

<Steps>

### Architecture du projet en amont  (TDD)
### Ne pas être influencé par le code déjà écrit  (TDD)
### <Box color="white"><a href="https://docs.python.org/3/library/doctest.html" color="white">Documentation "vivante"</a>  (TDD)</Box>
### Complexité minimale  (TDD)
### Meilleure couverture de tests (TDD)
### Regression
### Sérieux professionel

</Steps>

---

# <Box color="tomato">TDD</Box>

### <Box color="green">1. QA</Box>
### <Box color="green">2. Les Tests</Box>
### <Box color="green">3. TDD vs Approche traditionnelle</Box>
### <Box color="green">4. Utilité des tests ?</Box>
### <Box color="red">5. Pour aller plus loin</Box>

---

# 5. Pour aller plus loin

## <a href="https://github.com/dubzzz/fast-check/blob/main/documentation/HandsOnPropertyBased.md">Property-based</a> / Specification-driven testing

<ul>
<li><a href="http://www.cse.chalmers.se/~rjmh/QuickCheck/">QuickCheck</a></li>
<Steps>
<li><a href="https://hypothesis.readthedocs.io/en/latest/quickstart.html">Hypothesis</a></li>
<li><a href="https://www.crockford.com/jscheck.html">JSCheck</a> <a href="https://github.com/douglascrockford/JSCheck">(gh)</a></li>
<li><a href="https://github.com/dubzzz/fast-check">Fast-Check</a></li>
<li><a href="https://jsverify.github.io/">JSVerify</a></li>
</Steps>
</ul>


---

# <Box color="green">TDD</Box>

### <Box color="green">1. QA</Box>
### <Box color="green">2. Les Tests</Box>
### <Box color="green">3. TDD vs Approche traditionnelle</Box>
### <Box color="green">4. Utilité des tests ?</Box>
### <Box color="green">5. Pour aller plus loin</Box>

---

<Image src={DijkstraProof} style={{width: "100%", height: "40%"}} />

# <Box color="yellow">Questions ?</Box>

( <a href="https://alyra-tdd.netlify.app">https://alyra-tdd.netlify.app</a> )
